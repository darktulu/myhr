<?xml version="1.0" encoding="UTF-8"?>
<!--
To change this template, choose Tools | Templates
and open the template in the editor.
-->
<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml"
	xmlns:h="http://java.sun.com/jsf/html"
	xmlns:a4j="http://richfaces.org/a4j"
	xmlns:rich="http://richfaces.org/rich"
	xmlns:p="http://primefaces.org/ui"
	xmlns:fn="http://java.sun.com/jsp/jstl/functions"
	xmlns:ui="http://java.sun.com/jsf/facelets"
	xmlns:f="http://java.sun.com/jsf/core"
	xmlns:c="http://java.sun.com/jsp/jstl/core">
<h:head>
	<title>MyHR</title>
	<link rel='stylesheet' id='layout-css' href='./css/layout.css' type='text/css' media='all' />
	<link rel='stylesheet' id='layout-csss' href='../css/layout.css' type='text/css' media='all' />
	<link rel="Stylesheet" href="./css/only.css" type="text/css" />
	<link rel="Stylesheet" href="../css/only.css" type="text/css" />
	<link rel="Stylesheet" href="./css/toolbar-ui.css" type="text/css" />
	<f:loadBundle basename="com.wadia.properties.labels" var="lbl" />
	<f:loadBundle basename="com.wadia.properties.messages" var="msg" />
</h:head>
<h:body style="background: #f1f1f1; ">
	<div id="container">
		<ui:include src="header.xhtml" />
	</div>
	<!--div id="Menu">
            <ui:include src="Menus/Menu.xhtml"/>
        </div-->

	<h:form id="forms">
		<table style="max-width: 1700px; margin: auto;">
			<tbody>
				<tr>
					<td>
						<div id="left"
							style="width: 200px; min-height: 950px; background: #f1f1f1; font: 14px Helvetfontica, Arial, sans-serif;">
							<h:panelGrid columns="2" columnClasses="cols,cols" width="190" style="background: #ffffff;">
								<rich:panelMenu style="width:198px" itemMode="ajax" groupMode="ajax"
									groupExpandedLeftIcon="triangleUp" groupCollapsedLeftIcon="triangleDown"
									topGroupExpandedRightIcon="chevronUp" topGroupCollapsedRightIcon="chevronDown"
									itemLeftIcon="disc" expandSingle="false">
									<rich:panelMenuGroup label="My Team Data" rendered="#{authByRoleCtl.RH}">
										<a href="myTeamData.xhtml"><rich:panelMenuItem label="HR Management"
												name="HR Management" leftIcon="images/group.png" /> </a>
									</rich:panelMenuGroup>
									<rich:panelMenuGroup label="My Team" rendered="#{authByRoleCtl.PM}" expanded="true">
										<a href="myTeam.xhtml"><rich:panelMenuItem label="Leaves Summary"
												name="Leaves Summary" leftIcon="images/group_go.png" style="background: #fee6cd;" /> </a>
										<a href="temData.xhtml"><rich:panelMenuItem label="Team Data" name="Team Data"
												leftIcon="images/group_gear.png" /> </a>
										<a href="teamcalendar.xhtml"><rich:panelMenuItem label="Team Calendar"
												name="Team Calendar" leftIcon="images/calendar_view_day.png" /> </a>
									</rich:panelMenuGroup>
									<rich:panelMenuGroup label="My Data" expanded="false">
										<a href="acceuil.xhtml"><rich:panelMenuItem label="Personal Data" name="Personal Data"
												leftIcon="images/user_gray.png" /> </a>
										<a href="OrganizationalData.xhtml"><rich:panelMenuItem label="Organizational Data"
												name="Organizational Data" leftIcon="images/chart_organisation.png" /> </a>
										<a href="familyData.xhtml"><rich:panelMenuItem label="Family Data" name="Family Data"
												leftIcon="images/house.png" /> </a>
										<a href="contratData.xhtml"><rich:panelMenuItem label="Contract Data"
												name="Contract Data" leftIcon="images/page_white_text_width.png" /> </a>
										<a href="salary.xhtml"><rich:panelMenuItem label="Salary Data" name="Salary Data"
												leftIcon="images/cash-icon.png" /> </a>
										<a href="EducationData.xhtml"><rich:panelMenuItem label="Education Data"
												name="My Education" leftIcon="images/medal_gold_1.png" /> </a>
									</rich:panelMenuGroup>
									<rich:panelMenuGroup label="My Leaves" expanded="false">
										<a href="leaves.xhtml"><rich:panelMenuItem label="My Leaves" name="My Leaves"
												leftIcon="images/status_away.png" /> </a>
										<a href="absenceList.xhtml"><rich:panelMenuItem label="My Absences" name="My Absences"
												leftIcon="images/status_busy.png" /> </a>
										<a href="teamcalendar.xhtml"><rich:panelMenuItem label="My Team Calendar"
												name="My Team Calendar" leftIcon="images/calendar.png" /> </a>

									</rich:panelMenuGroup>
									<rich:panelMenuGroup label="Medical Inssurance" expanded="false">
										<a href="leaves.xhtml"><rich:panelMenuItem label="Inssurance Follow"
												name="Inssurance Follow" leftIcon="images/pill.png" /> </a>
									</rich:panelMenuGroup>
									<rich:panelMenuGroup label="Self Service" expanded="false">
										<a href="selfService.xhtml"><rich:panelMenuItem label="Employment Certificate"
												name="Certificate of Employment" leftIcon="images/timeline_marker.png" /> </a>
										<a href="SalaryCertificate.xhtml"><rich:panelMenuItem label="Salary Certificate"
												name="Salary Certificate" leftIcon="images/coins.png" /> </a>
										<a href="#"><rich:panelMenuItem label="Payslip" name="Payslip"
												leftIcon="images/page_key.png" /> </a>
									</rich:panelMenuGroup>
									<rich:panelMenuGroup label="Directory" expanded="false">
										<a href="directory.xhtml"><rich:panelMenuItem label="Employees data"
												name="Employees data" leftIcon="images/database_table.png" /> </a>
									</rich:panelMenuGroup>

								</rich:panelMenu>
							</h:panelGrid>

						</div>

					</td>

					<td style="border: solid 1px #f1f1f1; width: 100%;">
						<div id="middle" style="width: 100%; min-height: 300px; border: solid 1px #f1f1f1;">

							<div id="actions" style="width: 100%; height: 80px; margin-bottom: 2px;" title="Actions">
								<p
									style="color: #666666; font: bold 12px Helvetica, Arial, sans-serif; margin-left: 4px; margin-top: 4px;">Actions
									:</p>
								<h:panelGrid columns="2" style="margin-top: 4px; margin-left: 4px;">
									<h:panelGrid columns="2" style="margin-left: 20px;">
										<a href="leavePMcontrol.xhtml"><img src="images/1341096810_arrow_circle_left.png" /></a>
										<h:outputText value="Refresh data  " style="margin-left: 4px;">
										</h:outputText>
									</h:panelGrid>
									<h:panelGrid columns="2" style="margin-left: 20px;">
										<a href="myTeam.xhtml"><img src="images/1341936090_back.png" /></a>
										<h:outputText value="Back " style="margin-left: 4px;">
										</h:outputText>
									</h:panelGrid>
								</h:panelGrid>

							</div>

							<p:panel header="Summary Data" style=" width: 100%;  min-height:160px;">
                              <img src="#{leavePMcontrol.idphoto}" style="float: left; width: 150px; height: 120px; "/>
								<table style="margin: auto; min-width: 800px;" id="datatablesG">
									<tbody>
										<tr>
											<td style="width: 150px; height: 30px"><h:outputText value="Name" /></td>
											<td style="background: #fff;"><h:outputText value="#{leavePMcontrol.name}" /></td>
											<td style="width: 150px; height: 30px"><h:outputText value="Surname" /></td>
											<td style="background: #fff;"><h:outputText value="#{leavePMcontrol.surname}" /></td>
										</tr>
										<tr>
											<td style="width: 150px; height: 30px"><h:outputText value="Username" /></td>
											<td style="background: #fff;"><h:outputText value="#{leavePMcontrol.username}" /></td>
										</tr>

									</tbody>
								</table>
							</p:panel>
							
							<p:panel header="Requests" style="min-height: 690px;">
								<p:dataTable value="#{leavePMcontrol.dataList}" var="leave" id="tab" rows="20"
									 styleClass="stable" style="width: 100%;" paginator="true" paginatorPosition="bottom" widgetVar="tab">

									<p:column style="height : 40px; width : 150px;">
										<f:facet name="header">
											<h:outputText value="Start date" />
										</f:facet>
										<h:outputText value="#{leave.leaveStartDate}" />
									</p:column>
									
									<p:column style="height : 40px; width : 150px;">
										<f:facet name="header">
											<h:outputText value="End date " />
										</f:facet>
										<h:outputText value="#{leave.leaveEndDate}" />
									</p:column>
									
									
									<p:column style="width: 150px">
										<f:facet name="header">
											<h:outputText value="Days" />
										</f:facet>
										<h:outputText value="#{leave.totalDays}" />
									</p:column>
									
									<p:column style="width: 150px">
										<f:facet name="header">
											<h:outputText value="Year" />
										</f:facet>
										<h:outputText value="#{leave.date}" />
									</p:column>
									
									<p:column style="width:120px;">
										<f:facet name="header">
											<h:outputText value="Status " />
										</f:facet>
										<h:outputText value="#{leave.status}" rendered="#{leave.status=='waiting'}"
											style="color: lightseagreen;" />
									</p:column>
									
									<p:column style="width: 300px">
										<f:facet name="header">
											<h:outputText value="Comment" />
										</f:facet>
										<h:outputText value="#{leave.satatusDescription}" />
									</p:column>
									
									<p:column style="text-align: center; width:30px">
										<f:facet name="header">
											<h:outputText value="Accept" />
										</f:facet>
										<p:commandLink oncomplete="confirmationApp.show()"
											update=":formApp" rendered="#{leave.status=='waiting'}" >
											<img src="images/checkmark.png" />
											<f:setPropertyActionListener value="#{leave}" target="#{LeaveControlEditCtl.data}" />
										</p:commandLink>
                                  </p:column>
                                 
                                  <p:column style=" text-align: center; width: 30px;">
                                       <f:facet name="header">
											<h:outputText value="Reject" />
										</f:facet>
										<p:commandLink oncomplete="confirmationDApp.show()"
											rendered="#{leave.status=='waiting'}" update=":formDApp" >
											<img src="images/cross.png" />
											<f:setPropertyActionListener value="#{leave}" target="#{LeaveControlEditCtl.data}" />
										</p:commandLink>
									</p:column>

									</p:dataTable>
							</p:panel>
						</div>
					</td>
				</tr>
			</tbody>
		</table>
	</h:form>
   
   <h:form id="formApp">
			<p:confirmDialog widgetVar="confirmationApp"
				message="Are you sure you want to approve this Leave ?">

				<p:commandButton id="confirmDel" value="Approve"
					action="#{LeaveControlEditCtl.approuvePM}"
					styleClass="btn"  icon="ui-icon-disk" oncomplete="confirmationApp.hide()" >
				</p:commandButton>

				<p:commandButton id="declineDel" value="Cancel"
					onclick="confirmationApp.hide()" type="button" styleClass="btn" />
			</p:confirmDialog>
   </h:form>
   
   <h:form id="formDApp">
			<p:confirmDialog widgetVar="confirmationDApp"
				message="Are you sure you want to Disapprove this Leave ? Please add a comment before the action ">
                
                <p:inputTextarea rows="6" cols="33" value="#{LeaveControlEditCtl.description}" style="width : 100%;" /> 
				
				<p:commandButton id="confirmDapp" value="Disapprouve"
					action="#{LeaveControlEditCtl.disapprouvePM}"
					styleClass="btn"  icon="ui-icon-disk" oncomplete="confirmationDApp.hide()" >
				</p:commandButton>
               
				<p:commandButton id="declineDapp" value="Cancel"
					onclick="confirmationDApp.hide()" type="button" styleClass="btn" />
			</p:confirmDialog>
   </h:form>
   


</h:body>
</html>
