<?xml version="1.0" encoding="UTF-8"?>
<!--
To change this template, choose Tools | Templates
and open the template in the editor.
-->
<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml"
      xmlns:h="http://java.sun.com/jsf/html"
      xmlns:a4j="http://richfaces.org/a4j"
      xmlns:rich="http://richfaces.org/rich"
      xmlns:fn="http://java.sun.com/jsp/jstl/functions"
      xmlns:ui="http://java.sun.com/jsf/facelets"
      xmlns:f="http://java.sun.com/jsf/core" xmlns:c="http://java.sun.com/jsp/jstl/core">
    <h:head>
        <title>MyHR</title>
        <link rel='stylesheet' id='layout-css'  href='./css/layout.css' type='text/css' media='all' />
        <link rel='stylesheet' id='layout-csss'  href='../css/layout.css' type='text/css' media='all' />
        <link rel="Stylesheet" href="./css/only.css" type="text/css"/>
        <link rel="Stylesheet" href="../css/only.css" type="text/css"/>
        <link rel="Stylesheet" href="./css/toolbar-ui.css" type="text/css"/>
        <f:loadBundle basename="com.wadia.properties.labels" var="lbl"/>
        <f:loadBundle basename="com.wadia.properties.messages" var="msg"/>
        <style> 
            .barsearch{
                height: 20px;
            }
            .even-row {
                background-color: #FCFFFE;
                cursor: pointer;
            }
            .odd-row {
                background-color: #ffffff;
                cursor: pointer;
            }
            .active-row{
                background-color: #ffdca5;

            }
            .top{
                vertical-align: top;
            }
            .default-pointer{
                background: red;
            }
            .buttonImg{
                margin: 3px 8px 0px 8px; 
                cursor:pointer;
            }
            .rf-p-hdr{
                text-align: center;
                font-size: 1em !important;
            }
        </style>
    </h:head>
    <h:body> 
        <div id="container">
            <ui:include src="header.xhtml"/>
        </div>
        <!--div id="Menu">
            <ui:include src="Menus/MenuLeavs.xhtml"/>
        </div-->

        <h:form id="forms">
            <table style=" max-width: 1700px; margin: auto;">
                <tbody>
                    <tr>
                        <td>
                            <div id="left" style="width: 200px; min-height: 1200px; background: #f1f1f1;  font:  14px Helvetfontica, Arial, sans-serif; "> 
                                <h:panelGrid columns="2" columnClasses="cols,cols" width="400" style="background: #ffffff;"> 
                                    <rich:panelMenu style="width:198px" itemMode="ajax" groupMode="ajax" groupExpandedLeftIcon="triangleUp"
                                                    groupCollapsedLeftIcon="triangleDown" topGroupExpandedRightIcon="chevronUp"
                                                    topGroupCollapsedRightIcon="chevronDown" itemLeftIcon="disc" expandSingle="false"> 
                                        <rich:panelMenuGroup label="My Team Data" rendered="#{authByRoleCtl.RH}"> 
                                            <a href="myTeamData.xhtml"><rich:panelMenuItem label="HR Management" name="HR Management" leftIcon="images/group.png"/> </a>  
                                        </rich:panelMenuGroup>
                                        <rich:panelMenuGroup label="My Team" rendered="#{authByRoleCtl.PM}"> 
                                            <a href="myTeam.xhtml"><rich:panelMenuItem label="Leaves Summary" name="Leaves Summary" leftIcon="images/group_go.png"/> </a>  
                                            <a href="teamcalendar.xhtml"><rich:panelMenuItem label="Team Calendar" name="Team Calendar" leftIcon="images/calendar_view_day.png"/> </a>  
                                            <a href="calendar.xhtml"><rich:panelMenuItem label="My Reports" name="My Reports" leftIcon="images/calendar_view_day.png"/> </a>
                                        </rich:panelMenuGroup>
                                        <rich:panelMenuGroup label="My Data" expanded="true"> 
                                            <a href="acceuil.xhtml"><rich:panelMenuItem label="Personal Data" name="Personal Data" leftIcon="images/user_gray.png"  /> </a>
                                            <a href="OrganizationalData.xhtml"><rich:panelMenuItem label="Organizational Data" name="Organizational Data" leftIcon="images/chart_organisation.png" /> </a>
                                            <a href="familyData.xhtml"><rich:panelMenuItem label="Family Data" name="Family Data" leftIcon="images/house.png"/> </a>
                                            <a href="contratData.xhtml"><rich:panelMenuItem label="Contract Data" name="Contract Data" leftIcon="images/page_white_text_width.png"/> </a>
                                            <a href="salary.xhtml"><rich:panelMenuItem label="Salary Data" name="Salary Data" leftIcon="images/cash-icon.png"/> </a>
                                            <a href="EducationData.xhtml"><rich:panelMenuItem label="My Education" name="My Education" leftIcon="images/medal_gold_1.png" /> </a>
                                        </rich:panelMenuGroup> 
                                        <rich:panelMenuGroup label="My Leaves" expanded="true" > 
                                            <a href="leaves.xhtml"><rich:panelMenuItem label="My Leaves" name="My Leaves" leftIcon="images/status_away.png" style="background: #fee6cd;"/> </a>
                                            <a href="absenceList.xhtml"><rich:panelMenuItem label="My Absences" name="My Absences" leftIcon="images/status_busy.png"/> </a> 
                                            <a href="teamcalendar.xhtml"><rich:panelMenuItem label="My Team Calendar" name="My Team Calendar" leftIcon="images/calendar.png"/> </a>

                                        </rich:panelMenuGroup> 
                                        <rich:panelMenuGroup label="Medical Inssurance" expanded="true"> 
                                            <a href="inssurance.xhtml"><rich:panelMenuItem label="Inssurance Follow" name="Inssurance Follow" leftIcon="images/pill.png"/> </a> 
                                        </rich:panelMenuGroup>
                                        <rich:panelMenuGroup label="Self Service" expanded="true"> 
                                            <a href="selfService.xhtml"><rich:panelMenuItem label="Employment Certificate" name="Certificate of Employment" leftIcon="images/timeline_marker.png"/> </a>  
                                            <a href="SalaryCertificate.xhtml"><rich:panelMenuItem label="Salary Certificate" name="Salary Certificate" leftIcon="images/coins.png"/> </a> 
                                            <a href="#"><rich:panelMenuItem label="Payslip" name="Payslip" leftIcon="images/page_key.png"/> </a>  
                                        </rich:panelMenuGroup>
                                        <rich:panelMenuGroup label="Directory" expanded="true"> 
                                            <a href="directory.xhtml"><rich:panelMenuItem label="Employees data" name="Employees data" leftIcon="images/database_table.png"/> </a>
                                        </rich:panelMenuGroup>

                                    </rich:panelMenu> 
                                </h:panelGrid> 

                            </div>

                        </td>
                        <td style="border : solid 1px #f1f1f1; width: 100%;">

                            <div id="actions" style="width: 100%; height: 80px; margin-bottom: 2px;" title="Actions">
                                <p style="color : #666666; font: bold 12px Helvetica, Arial, sans-serif; margin-left: 4px; margin-top: 4px;">Actions : </p>
                                <h:panelGrid columns="2" style="margin-top: 4px; margin-left: 4px;">

                                    <h:panelGrid columns="3" >
                                        <a href="leave.xhtml"><img src="images/1341843403_calendar-blue.png"/></a>
                                        <h:outputText value="Add Vacation Request"></h:outputText>
                                    </h:panelGrid>

                                    <h:panelGrid columns="2" style="margin-left: 20px;" >
                                        <a href="leaves.xhtml"><img src="images/1341096810_arrow_circle_left.png"/></a>
                                        <h:outputText value="Refresh data  "> 
                                        </h:outputText>
                                    </h:panelGrid>
                                </h:panelGrid>
                            </div>

                            <rich:panel header="Summary Data" style=" width: 100%;  min-height:460px; margin-top: 2px;">

                                <rich:dataTable value="#{SoldleaveCtl.list}" var="sold"
                                                id="tables" rows="10" rowClasses="odd-row, even-row"
                                                styleClass="stable"  style="margin: auto; width: 901px; margin-top:15px; text-align: center;">
                                    <f:facet name="header"> 
                                        <rich:column>
                                            <h:outputText value="Vacation Status, Consumed Days Off" style="background: #green;" />
                                        </rich:column>
                                        <rich:columnGroup> 
                                            <rich:column  style="width : 150px;"> 
                                                <h:outputText value="Year" />
                                            </rich:column> 
                                            <rich:column  style="width : 300px;"> 
                                                <h:outputText value="Total Entitled Days Off" /> 
                                            </rich:column> 
                                            <rich:column  style="width : 300px;" > 
                                                <h:outputText value="Total consumed Days Off" /> 
                                            </rich:column> 
                                            <rich:column  style="width : 150px;"> 
                                                <h:outputText value="Total Remaining Days Off" /> 
                                            </rich:column> 
                                        </rich:columnGroup> 
                                    </f:facet> 

                                    <rich:column style="height : 30px;" >
                                        <h:outputText value="#{sold.year}" />
                                    </rich:column>

                                    <rich:column>
                                        <h:outputText value="#{sold.sold}" />
                                    </rich:column>

                                    <rich:column>
                                        <h:outputText value="#{sold.consumed}" />
                                    </rich:column>

                                    <rich:column style="background: #ccccff;">
                                        <h:outputText value="#{sold.rest}" />
                                    </rich:column>

                                    <f:facet name="footer">
                                        <rich:dataScroller/>
                                    </f:facet>
                                </rich:dataTable>



                                <rich:dataTable value="#{SoldleaveCtl.list}" var="sold"
                                                id="tablesf" rows="10" rowClasses="odd-row, even-row"
                                                styleClass="stable"  style="margin: auto; width: 900px; margin-top:15px; text-align: center;">
                                    <f:facet name="header">
                                        <rich:column>
                                            <h:outputText value="Vacation Status, Planned Days Off" />
                                        </rich:column>
                                        <rich:columnGroup> 
                                            <rich:column style="width : 150px;"> 
                                                <h:outputText value="Year" />
                                            </rich:column> 
                                            <rich:column style="width : 300px;"> 
                                                <h:outputText value="Total Remaining Days Off" /> 
                                            </rich:column> 
                                            <rich:column style="width : 300px;" > 
                                                <h:outputText value="Total Planned Days Off" /> 
                                            </rich:column> 
                                            <rich:column style="width : 150px; "> 
                                                <h:outputText value="Delta" /> 
                                            </rich:column> 
                                        </rich:columnGroup>
                                    </f:facet>
                                    <rich:column  style="height : 30px;" >
                                        <h:outputText value="#{sold.year}"/>
                                    </rich:column>
                                    <rich:column>
                                        <h:outputText value="#{sold.rest}" />
                                    </rich:column>

                                    <rich:column>
                                        <h:outputText value="#{sold.planned}" />
                                    </rich:column>

                                    <rich:column style="background: #fee6cd;">
                                        <h:outputText value="#{sold.delta}" />
                                    </rich:column>

                                    <f:facet name="footer">
                                        <rich:dataScroller/>
                                    </f:facet>
                                </rich:dataTable>
                            </rich:panel>

                            <rich:panel header="Leaves History" style="margin-top:10px; min-height: 628px;">
                                <h:panelGroup style="float: right; margin-bottom: 10px;">
                                    <h:outputText value="Search By Date " style="margin-right: 5px;" />
                                    <rich:calendar mode="ajax" boundaryDatesMode="scroll"  style="vertical-align: middle; " value="#{LeavesListCtl.searchByDate}">
                                        <a4j:ajax event="change" render="tab"/>
                                    </rich:calendar>
                                    <h:graphicImage style="vertical-align: middle; margin-left : 5px;" width="16px" value="images/Loupe-icon.png"/>
                                </h:panelGroup>

                                <h:panelGroup style="float: right; margin-bottom: 10px; margin-right: 40px;">
                                    <h:outputText value="General Search " style="margin-right: 5px;" />
                                    <h:inputText  style="vertical-align: middle; " value="#{LeavesListCtl.search}">
                                        <a4j:ajax event="keyup" render="tab"/>
                                    </h:inputText>
                                    <h:graphicImage style="vertical-align: middle; margin-left : 5px;" width="16px" value="images/Loupe-icon.png"/>
                                </h:panelGroup>



                                <rich:dataTable value="#{LeavesListCtl.geteLData()}" var="leave"
                                                id="tabLeaves" rows="15" rowClasses="odd-row, even-row"
                                                styleClass="stable" style="width: 100%;">

                                    <rich:column  style="height : 40px;" >
                                        <f:facet name="header">
                                            <h:outputText value="Start date" />
                                        </f:facet>
                                        <h:outputText value="#{leave.leaveStartDate}" />
                                    </rich:column>
                                    <rich:column>
                                        <f:facet name="header">
                                            <h:outputText value="End date " />
                                        </f:facet>
                                        <h:outputText value="#{leave.leaveEndDate}" />
                                    </rich:column>
                                    <rich:column style="width: 150px">
                                        <f:facet name="header">
                                            <h:outputText value="Type" />
                                        </f:facet>
                                        <h:outputText value="#{leave.leaveType}" />
                                    </rich:column>
                                    <rich:column style="width: 150px">
                                        <f:facet name="header">
                                            <h:outputText value="Days" />
                                        </f:facet>
                                        <h:outputText value="#{leave.totalDays}" />
                                    </rich:column>
                                    <rich:column style="width: 150px">
                                        <f:facet name="header">
                                            <h:outputText value="Year" />
                                        </f:facet>
                                        <h:outputText value="#{leave.date}" />
                                    </rich:column>
                                    <rich:column style="width: 120px;">
                                        <f:facet name="header">
                                            <h:outputText value="Status " />
                                        </f:facet>
                                        <h:outputText value="#{leave.status}" rendered="#{leave.status=='taken'}" style="color: green;"/>
                                        <h:outputText value="#{leave.status}" rendered="#{leave.status=='waiting'}" style="color:  #ff6600;"/>
                                        <h:outputText value="#{leave.status}" rendered="#{leave.status=='canceled'}" style="color: red;"/>
                                        <h:outputText value="#{leave.status}" rendered="#{leave.status=='Approved By PM'}" style="color: orange;"/>
                                        <h:outputText value="#{leave.status}" rendered="#{leave.status=='Approved By HR'}" style="color: #009999;"/>
                                        <h:outputText value="#{leave.status}" rendered="#{leave.status=='Disapproved By HR'}" style="color: #999999;"/>
                                    </rich:column>
                                    <rich:column style="width:60px">
                                        <f:facet name="header">
                                            <h:outputText value="Actions"/>
                                        </f:facet>

                                        <div id="canc" style=" float: right;">
                                            <a4j:commandLink   style="color: lightseagreen; margin-left: 2px; margin-right: 2px;"  rendered="#{leaveCtl.cancel(leave.status)}"
                                                               onclick="#{rich:component('cancel')}.show()" reRender="tabLeaves" oncomplete="#{LeavesListCtl.init()}">                      
                                                <img src="images/1336230614_150.png" title="Cancel leave"/>
                                                <f:setPropertyActionListener  value="#{leave.leaveId}" target="#{leaveCtl.idToEdit}"/>
                                            </a4j:commandLink>
                                        </div>

                                        <div id="tk" style=" float: right;">
                                            <a4j:commandLink   style="color: lightseagreen; margin-left: 2px; margin-right: 2px;"  rendered="#{leave.status == 'Approved By HR'}"
                                                               onclick="#{rich:component('take')}.show()" reRender="tabLeaves" oncomplete="#{LeavesListCtl.init()}">                      
                                                <img src="images/1336231149_4.png" title="Cancel leave"/>
                                                <f:setPropertyActionListener  value="#{leave.leaveId}" target="#{leaveCtl.idToEdit}"/>
                                            </a4j:commandLink>
                                        </div>
                                        <div id="delete" style=" float: right;">
                                            <a4j:commandLink   style="color: lightseagreen; margin-left: 2px; margin-right: 2px;"  rendered="#{ leave.status == 'canceled'}"
                                                               onclick="#{rich:component('dele')}.show()" reRender="tabLeaves" oncomplete="#{LeavesListCtl.init()}">                      
                                                <img src="images/1336230653_3.png" title="Delete leave"/>
                                                <f:setPropertyActionListener  value="#{leave.leaveId}" target="#{leaveCtl.idToEdit}"/>
                                            </a4j:commandLink>
                                        </div> 

                                        <div id="editss" style="margin-right: 2px; float: left;">
                                            <h:commandLink styleClass="btn"  action="edit" rendered="#{leave.status=='waiting'}">
                                                <img src="images/edit-icon.png"/>
                                                <f:setPropertyActionListener  value="#{leave.leaveId}" target="#{leveEditCtl.toEdit}"/>
                                            </h:commandLink>
                                        </div>
                                        <div id="view" style="margin-right: 2px; float: left;">
                                            <h:commandLink styleClass="btn"  action="view">
                                                <img src="images/view-icon.png"/>
                                                <f:setPropertyActionListener  value="#{leave.leaveId}" target="#{viewLeaveCtl.idToEdit}"/>
                                            </h:commandLink>
                                        </div>

                                    </rich:column>

                                    <f:facet name="footer">
                                        <rich:dataScroller/>
                                    </f:facet>
                                </rich:dataTable>
                            </rich:panel>

                        </td>
                    </tr>
                </tbody>
                <rich:jQuery selector=".stable tr" event="mouseover"
                             query="jQuery(this).addClass('active-row')"/>
                <rich:jQuery selector=".stable tr" event="mouseout"
                             query="jQuery(this).removeClass('active-row')"/>
            </table> 

            <rich:popupPanel id="cancel" width="350" height="140">
                <f:facet name="header">
                    Cancel leave
                </f:facet>
                <f:facet name="controls">
                      <h:outputLink value="#" onclick="#{rich:component('dele')}.hide(); return false;">
                         X
                      </h:outputLink>
               </f:facet>
                <h:panelGrid columns="2" style="width: 300px;">
                    <p style="font:  bold 12px Helvetica, Arial, sans-serif; margin-top: 20px; float: left; color : #f08520;">Do you want to cancel this leave ?</p>
                    <img src="images/1336862975_notification_warning.png" style="float : right; margin: auto; "/>
                </h:panelGrid>
                <h:panelGrid columns="2" style="width: 100px; height : 30px; margin-top: 8px; float : right;">
                    <a4j:commandButton value="yes"
                                       action="#{leaveCtl.cancel()}"
                                       onclick="#{rich:component('cancel')}.hide()" oncomplete="#{LeavesListCtl.init()}" reRender="forms" style="width : 60px; float: right; height : 20px;">

                    </a4j:commandButton>
                </h:panelGrid>
            </rich:popupPanel>
            
            <rich:popupPanel id="take" width="350" height="120">
                <f:facet name="header">
                    Take leave
                </f:facet>
                <b></b>
                <br/>
                do you want to take this leave ?
                <br/>
                <h:panelGrid columns="2" width="50%">
                    <a4j:commandButton value="no" onclick="#{rich:component('take')}.hide()"/>
                    <a4j:commandButton value="yes"
                                       action="#{leaveCtl.take()}"
                                       onclick="#{rich:component('take')}.hide()" oncomplete="#{LeavesListCtl.init()}" reRender="forms">

                    </a4j:commandButton>
                </h:panelGrid>
            </rich:popupPanel>
            <rich:popupPanel id="dele" width="350" height="140">
                <f:facet name="header">
                    Delete leave
                </f:facet>
               
                <f:facet name="controls">
                      <h:outputLink value="#" onclick="#{rich:component('dele')}.hide(); return false;">
                         X
                      </h:outputLink>
               </f:facet>
               
                <h:panelGrid columns="2" style="width: 300px;">
                    <p style="font:  bold 12px Helvetica, Arial, sans-serif; margin-top: 20px; float: left; color : #f08520;">Do you want to delete this leave ?</p>
                    <img src="images/1336862975_notification_warning.png" style="float : right; margin: auto; "/>
                </h:panelGrid>
                <h:panelGrid columns="2" style="width: 100px; height : 30px; margin-top: 8px; float : right;" >
                    <a4j:commandButton value="yes"
                                       action="#{leaveCtl.delete()}"
                                       onclick="#{rich:component('dele')}.hide()" oncomplete="#{LeavesListCtl.init()}" reRender="forms" style="width : 60px; float: right; height : 20px;">

                    </a4j:commandButton>

                </h:panelGrid>
            </rich:popupPanel>
            
            
            
        </h:form>

    </h:body>
</html>
