<?xml version="1.0" encoding="UTF-8"?>
<!--
To change this template, choose Tools | Templates
and open the template in the editor.
-->
<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml"
      xmlns:h="http://java.sun.com/jsf/html"
      xmlns:a4j="http://richfaces.org/a4j"
      xmlns:rich="http://richfaces.org/rich"
      xmlns:fn="http://java.sun.com/jsp/jstl/functions"
      xmlns:ui="http://java.sun.com/jsf/facelets"
      xmlns:f="http://java.sun.com/jsf/core" xmlns:c="http://java.sun.com/jsp/jstl/core">
       <h:head>
        <title>MyHR</title>
        <link rel='stylesheet' id='layout-css'  href='./css/layout.css' type='text/css' media='all' />
        <link rel='stylesheet' id='layout-csss'  href='../css/layout.css' type='text/css' media='all' />
        <link rel="Stylesheet" href="./css/only.css" type="text/css"/>
        <link rel="Stylesheet" href="../css/only.css" type="text/css"/>
        <link rel="Stylesheet" href="./css/toolbar-ui.css" type="text/css"/>
        <f:loadBundle basename="com.wadia.properties.labels" var="lbl"/>
        <f:loadBundle basename="com.wadia.properties.messages" var="msg"/>
        <style> 
            .barsearch{
                height: 20px;
            }
            .even-row {
                background-color: #FCFFFE;
                cursor: pointer;
            }
            .odd-row {
                background-color: #ffffff;
                cursor: pointer;
            }
            .active-row{
                background-color: #ffdca5;

            }
            .top{
                vertical-align: top;
            }
            .default-pointer{
                background: red;
            }
            .buttonImg{
                margin: 3px 8px 0px 8px; 
                cursor:pointer;
            }
            .rf-p-hdr{
                text-align: center;
                font-size: 1em !important;
            }
        </style>
    </h:head>
    <h:body> 
        <div id="container">
            <ui:include src="header.xhtml"/>
        </div>
        <h:form id="forms">
            <table style=" max-width: 1700px; margin: auto;">
                <tbody>
                    <tr><td>
                            <div id="left" style="width: 200px; min-height: 1000px; background: #f1f1f1;  font:  14px Helvetfontica, Arial, sans-serif; "> 
                                <h:panelGrid columns="2" columnClasses="cols,cols" width="400" style="background: #ffffff;"> 
                                    <rich:panelMenu style="width:198px" itemMode="ajax" groupMode="ajax" groupExpandedLeftIcon="triangleUp"
                                                    groupCollapsedLeftIcon="triangleDown" topGroupExpandedRightIcon="chevronUp"
                                                    topGroupCollapsedRightIcon="chevronDown" itemLeftIcon="disc" expandSingle="false"> 
                                        <rich:panelMenuGroup label="Main Profile" rendered="#{authByRoleCtl.RH}" expanded="true"> 
                                            <a href="acceuil.xhtml"><rich:panelMenuItem label="Back" name="Back" leftIcon="images/arrow_left.png"/> </a>  
                                        </rich:panelMenuGroup>
                                        <rich:panelMenuGroup label="My Team Data" expanded="true"> 
                                            <a href="myTeamData.xhtml"><rich:panelMenuItem label="Personal Data" name="Personal Data" leftIcon="images/user_gray.png" /> </a>
                                            <a href="EmpOraganizational.xhtml"><rich:panelMenuItem label="Organizational Data" name="Organizational Data" leftIcon="images/chart_organisation.png" /> </a>
                                            <a href="FamilyList.xhtml"><rich:panelMenuItem label="Family Data" name="Family Data" leftIcon="images/house.png"/> </a>
                                            <a href="ContratHr.xhtml"><rich:panelMenuItem label="Contract Data" name="Contract Data" leftIcon="images/page_white_text_width.png"/> </a>
                                            <a href="SalaryHr.xhtml"><rich:panelMenuItem label="Salary Data" name="Salary Data" leftIcon="images/cash-icon.png"/> </a>
                                        </rich:panelMenuGroup> 
                                        <rich:panelMenuGroup label="Leave Data" expanded="true" > 
                                            <a href="LeaveSummaryList.xhtml"><rich:panelMenuItem label="Leaves Summary" name="Leaves Summary" leftIcon="images/status_away.png"  /> </a>
                                            <a href="AbsenceHr.xhtml"><rich:panelMenuItem label="Absences" name="My Absences" leftIcon="images/status_busy.png"/> </a> 


                                        </rich:panelMenuGroup> 
                                        <rich:panelMenuGroup label="Medical Inssurance" expanded="true"> 
                                            <a href="inssuranceHr.xhtml"><rich:panelMenuItem label="Inssurance Follow" name="Inssurance Follow" leftIcon="images/pill.png" style="background: #fee6cd;"/> </a> 
                                        </rich:panelMenuGroup>
                                        <rich:panelMenuGroup label="Misconduct and warning" expanded="true"> 
                                            <a href="Warning.xhtml"><rich:panelMenuItem label="Warning" name="Warning" leftIcon="images/flag_red.png"/> </a> 
                                        </rich:panelMenuGroup>

                                    </rich:panelMenu> 
                                </h:panelGrid> 

                            </div>

                        </td> 
                          <td style="border : solid 1px #f1f1f1; width: 100%;">
                            <div id="middle" style="width: 100%; min-height: 300px; border: solid 1px #f1f1f1;">
                                <div id="actions" style="width: 100%; height: 80px; margin-bottom: 2px;" title="Actions">
                                    <p style="color : #666666; font: bold 12px Helvetica, Arial, sans-serif; margin-left: 4px; margin-top: 4px; ">Actions : </p>
                                    <h:panelGrid columns="1" style="margin-top: 4px; margin-left: 4px;">
                                        <h:panelGrid columns="2" >
                                            <a href="inssuranceHr.xhtml"><img src="images/1341936090_back.png"/></a>
                                            <h:outputText value="Back"  style="margin-left: 8px;"></h:outputText>
                                        </h:panelGrid>
                                    </h:panelGrid>
                                </div>
                            <rich:panel header="Summary Data" style=" width: 100%;  min-height:200px;">

                                <table style="margin: auto; min-width: 800px;" id="datatablesG">
                                    <tbody>
                                        <tr>
                                            <td style="width: 150px;"><h:outputText value="Name"/></td>
                                            <td style="background: #fff;"><h:outputText value="#{inssuranceControlCtl.name}"/></td>
                                            <td style="width: 150px;"><h:outputText value="Surname:"/></td>
                                            <td style="background: #fff;"><h:outputText value="#{inssuranceControlCtl.surname}"/></td>
                                        </tr>
                                        <tr> 
                                            <td style="width: 150px;"><h:outputText value="Username"/></td>
                                            <td style="background: #fff;"><h:outputText value="#{inssuranceControlCtl.username}"/></td>

                                            <td style="width: 150px;"><h:outputText value="CIN"/></td>
                                            <td style="background: #fff;"><h:outputText value="#{inssuranceControlCtl.CIN}"/></td>
                                        </tr>
                                        <tr>

                                            <td style="width: 150px;"><h:outputText value="CNSS"/></td>
                                            <td style="background: #fff;"><h:outputText value="#{inssuranceControlCtl.CNSS}"/></td>
                                            <td style="width: 150px;"><h:outputText value="Nombre Personnes Pris en charge"/></td>
                                            <td style="background: #fff;"><h:outputText value="#{inssuranceControlCtl.number}"/></td>
                                        </tr>

                                    </tbody>
                                </table>
                            </rich:panel>
                            <rich:panel header="Inssurance History" style="margin-top:15px; min-height: 696px;">

                                <rich:dataTable value="#{inssuranceControlCtl.listInssurance}" var="inssurance"
                                                id="tables" rows="15" rowClasses="odd-row, even-row"
                                                styleClass="stable"  style="margin: auto; width: 100%; margin-top:15px;">

                                    <rich:column style="height : 40px;">
                                        <f:facet name="header">
                                            <h:outputText value="matricule" />
                                        </f:facet>
                                        <h:outputText value="#{inssurance.matricule}" />
                                    </rich:column>
                                    <rich:column>
                                        <f:facet name="header">
                                            <h:outputText value="Date" />
                                        </f:facet>
                                        <h:outputText value="#{inssurance.date}" />
                                    </rich:column>
                                    <rich:column>
                                        <f:facet name="header">
                                            <h:outputText value="type" />
                                        </f:facet>
                                        <h:outputText value="#{inssurance.type}" />
                                    </rich:column>
                                    <rich:column>
                                        <f:facet name="header">
                                            <h:outputText value="Person name" />
                                        </f:facet>
                                        <h:outputText value="#{inssurance.personName}" />
                                    </rich:column>
                                    <rich:column>
                                        <f:facet name="header">
                                            <h:outputText value="Total amount" />
                                        </f:facet>
                                        <h:outputText value="#{inssurance.totalAmount}" />
                                    </rich:column>

                                    <rich:column>
                                        <f:facet name="header">
                                            <h:outputText value="Date de soin" />
                                        </f:facet>
                                        <h:outputText value="#{inssurance.dateSoins}" />
                                    </rich:column>
                                    <rich:column>
                                        <f:facet name="header">
                                            <h:outputText value="Type de dossier" />
                                        </f:facet>
                                        <h:outputText value="#{inssurance.dossier}" />
                                    </rich:column>

                                    <rich:column>
                                        <f:facet name="header">
                                            <h:outputText value="Status" />
                                        </f:facet>
                                        <h:outputText value="#{inssurance.status}" rendered="#{inssurance.status=='Edited'}" style="text-align: center; color : blue;"  />
                                        <h:outputText value="#{inssurance.status}" rendered="#{inssurance.status=='Submited To HR'}" style="text-align: center; color : orange;"  />
                                        <h:outputText value="#{inssurance.status}" rendered="#{inssurance.status=='Accepted by insurrance'}" style="text-align: center; color : green;"  />
                                        <h:outputText value="#{inssurance.status}" rendered="#{inssurance.status=='Payement received'}" style="text-align: center; color : green;"  />
                                        <h:outputText value="#{inssurance.status}" rendered="#{inssurance.status=='HR Acknoledge receiving'}" style="text-align: center; color : violet;"  />
                                        <h:outputText value="#{inssurance.status}" rendered="#{inssurance.status=='Submited to Insurance'}" style="text-align: center; color : #3366cc;"  />
                                        <h:outputText value="#{inssurance.status}" rendered="#{inssurance.status=='In progess with Insurance'}" style="text-align: center; color : #ff6600;"  />
                                        <h:outputText value="#{inssurance.status}" rendered="#{inssurance.status=='Rejected by insurrance'}" style="text-align: center; color : red;"  />
                                    </rich:column>

                                    <rich:column>
                                        <f:facet name="header">
                                            <h:outputText value="Status description" />
                                        </f:facet>
                                        <h:outputText value="#{inssurance.statusDescription}" />
                                    </rich:column>
                                    <rich:column style="width: 50px;">
                                        <f:facet name="header">
                                            <h:outputText value="Action" />
                                        </f:facet>
                                        <div id="send" style="margin-left: 8px; float: left;">
                                            <a4j:commandLink   style="color: lightseagreen;"  rendered="#{ inssurance.status=='Submited To HR'}"
                                                               onclick="#{rich:component('acknowlege')}.show()" render="tables" oncomplete="#{inssuranceControlCtl.update()}">                      
                                                <img src="images/1336558914_mail-open-receive.png" style="margin-left: 10px;" title="HR Acknoledge receiving"/>
                                                <f:setPropertyActionListener  value="#{inssurance.inssuranceId}" target="#{InssuranceStatusCtl.idToEdit}"/>
                                            </a4j:commandLink>
                                        </div>
                                        <div id="sendpr" style="margin-left: 8px; float: left;">
                                            <a4j:commandLink   style="color: lightseagreen;"  rendered="#{ inssurance.status=='HR Acknoledge receiving'}"
                                                               onclick="#{rich:component('sendInssurance')}.show()" render="tables" oncomplete="#{inssuranceControlCtl.update()}">                      
                                                <img src="images/1336560934_mail-open-send.png" style="margin-left: 10px;" title="Submited to Insurance"/>
                                                <f:setPropertyActionListener  value="#{inssurance.inssuranceId}" target="#{InssuranceStatusCtl.idToEdit}"/>
                                            </a4j:commandLink>
                                        </div>
                                        <div id="inprogres" style="margin-left: 8px; float: left;">
                                            <a4j:commandLink   style="color: lightseagreen;"  rendered="#{ inssurance.status=='Submited to Insurance'}"
                                                               onclick="#{rich:component('inprogress')}.show()" render="tables" oncomplete="#{inssuranceControlCtl.update()}">                      
                                                <img src="images/arrow_refresh.png" style="margin-left: 10px;" title="In progress"/>
                                                <f:setPropertyActionListener  value="#{inssurance.inssuranceId}" target="#{InssuranceStatusCtl.idToEdit}"/>
                                            </a4j:commandLink>
                                        </div>
                                        <div id="accept" style="margin-left: 8px; float: left;">
                                            <a4j:commandLink   style="color: lightseagreen;"  rendered="#{ inssurance.status=='In progess with Insurance'}"
                                                               onclick="#{rich:component('accepted')}.show()" render="tables" oncomplete="#{inssuranceControlCtl.update()}">                      
                                                <img src="images/1336570833_camera_test.png" style="margin-left: 10px;" title="accepted"/>
                                                <f:setPropertyActionListener  value="#{inssurance.inssuranceId}" target="#{InssuranceStatusCtl.idToEdit}"/>
                                            </a4j:commandLink>
                                        </div>
                                        <div id="refuse" style="margin-left: 8px; float: left;">
                                            <a4j:commandLink   style="color: lightseagreen;"  rendered="#{ inssurance.status=='In progess with Insurance'}"
                                                               onclick="#{rich:component('refused')}.show()" render="tables" oncomplete="#{inssuranceControlCtl.update()}">                      
                                                <img src="images/1336570908_101.png" style="margin-left: 10px;" title="refused"/>
                                                <f:setPropertyActionListener  value="#{inssurance.inssuranceId}" target="#{InssuranceStatusCtl.idToEdit}"/>
                                            </a4j:commandLink>
                                        </div>
                                    </rich:column>

                                    <f:facet name="footer">
                                        <rich:dataScroller/>
                                    </f:facet>
                                </rich:dataTable>
                            </rich:panel>
                           </div>
                        </td>
                    </tr>
                </tbody>
                <rich:jQuery selector=".stable tr" event="mouseover"
                             query="jQuery(this).addClass('active-row')"/>
                <rich:jQuery selector=".stable tr" event="mouseout"
                             query="jQuery(this).removeClass('active-row')"/>
            </table> 
            <rich:popupPanel id="acknowlege" width="350" height="120">
                <f:facet name="header">
                    Acknoledge receiving 
                </f:facet>
                <b></b>
                <br/>
                Do you confirm reception ?<br/><br/>
                <br/>
                <h:panelGrid columns="2" width="50%">
                    <a4j:commandButton value="no" onclick="#{rich:component('acknowlege')}.hide()"/>
                    <a4j:commandButton value="yes"
                                       action="#{InssuranceStatusCtl.acknowlege()}"
                                       onclick="#{rich:component('acknowlege')}.hide()" oncomplete="#{inssuranceControlCtl.update()}" render="tables">

                    </a4j:commandButton>
                </h:panelGrid>
            </rich:popupPanel>
            <rich:popupPanel id="sendInssurance" width="350" height="120">
                <f:facet name="header">
                    Sending to Inssurance
                </f:facet>
                <b></b>
                <br/>
                sended to Inssurance
                <br/>
                <h:panelGrid columns="2" width="50%">
                    <a4j:commandButton value="no" onclick="#{rich:component('sendInssurance')}.hide()"/>
                    <a4j:commandButton value="Approve"
                                       action="#{InssuranceStatusCtl.sendToInssurance()}"
                                       onclick="#{rich:component('sendInssurance')}.hide()" oncomplete="#{inssuranceControlCtl.update()}" render="tables">

                    </a4j:commandButton>
                </h:panelGrid>
            </rich:popupPanel>


           
            <rich:popupPanel id="inprogress" width="350" height="120">
                <f:facet name="header">
                    In progress with inssurance
                </f:facet>
                <b></b>
                <br/>
                In progress with inssurance
                <br/>
                <h:panelGrid columns="2" width="50%">
                    <a4j:commandButton value="no" onclick="#{rich:component('inprogress')}.hide()"/>
                    <a4j:commandButton value="yes"
                                       action="#{InssuranceStatusCtl.inprogress()}"
                                       onclick="#{rich:component('inprogress')}.hide()" oncomplete="#{inssuranceControlCtl.update()}" render="tables">

                    </a4j:commandButton>
                </h:panelGrid>
            </rich:popupPanel>


            <rich:popupPanel id="accepted" width="350" height="120">
                <f:facet name="header">
                    Inssurance answer
                </f:facet>
                <b></b>
                <br/>
                Accepted by inssurance
                <br/>
                <h:panelGrid columns="2" width="50%">
                    <a4j:commandButton value="no" onclick="#{rich:component('accepted')}.hide()"/>
                    <a4j:commandButton value="Approve"
                                       action="#{InssuranceStatusCtl.accepted()}"
                                       onclick="#{rich:component('accepted')}.hide()" oncomplete="#{inssuranceControlCtl.update()}" render="tables">

                    </a4j:commandButton>
                </h:panelGrid>
            </rich:popupPanel>

            <rich:popupPanel id="refused" width="400" height="200">
                <f:facet name="header">
                    Inssurance answer
                </f:facet>
                <b></b>
                <br/>
                Please add a description why the request is rejected by inssurance :
                <h:inputTextarea value="#{InssuranceStatusCtl.description}"/>
                <br/>
                <h:panelGrid columns="2" width="50%">
                    <a4j:commandButton value="no" onclick="#{rich:component('refused')}.hide()"/>
                    <a4j:commandButton value="Approve"
                                       action="#{InssuranceStatusCtl.refused()}"
                                       onclick="#{rich:component('refused')}.hide()" oncomplete="#{inssuranceControlCtl.update()}" render="tables">

                    </a4j:commandButton>
                </h:panelGrid>
            </rich:popupPanel>
        </h:form>

    </h:body>
</html>
