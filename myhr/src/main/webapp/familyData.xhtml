<?xml version="1.0" encoding="UTF-8"?>
<!--
To change this template, choose Tools | Templates
and open the template in the editor.
-->
<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml"
      xmlns:h="http://java.sun.com/jsf/html"
      xmlns:a4j="http://richfaces.org/a4j"
      xmlns:rich="http://richfaces.org/rich"
      xmlns:fn="http://java.sun.com/jsp/jstl/functions"
      xmlns:ui="http://java.sun.com/jsf/facelets"
      xmlns:f="http://java.sun.com/jsf/core" xmlns:c="http://java.sun.com/jsp/jstl/core">
    <h:head>
        <title>MyHr</title>
        <link rel='stylesheet' id='layout-css'  href='./css/layout.css' type='text/css' media='all' />
        <link rel='stylesheet' id='layout-csss'  href='../css/layout.css' type='text/css' media='all' />
        <link rel="Stylesheet" href="./css/only.css" type="text/css"/>
        <link rel="Stylesheet" href="../css/only.css" type="text/css"/>
        <link rel="Stylesheet" href="./css/toolbar-ui.css" type="text/css"/>
        <f:loadBundle basename="com.wadia.properties.labels" var="lbl"/>
        <f:loadBundle basename="com.wadia.properties.messages" var="msg"/>
    </h:head>
    <h:body style="background: #f1f1f1; "> 
        <div id="container">
            <ui:include src="header.xhtml"/>
        </div>
        <!--div id="Menu">
            <ui:include src="Menus/Menu.xhtml"/>
        </div-->

        <h:form id="forms">
            <table style=" max-width: 1700px; margin: auto;">
                <tbody>
                    <tr><td>
                            <div id="left" style="width: 200px; min-height: 984px; background: #f1f1f1;  font:  14px Helvetfontica, Arial, sans-serif; "> 
                                <h:panelGrid columns="2" columnClasses="cols,cols" width="400" style="background: #ffffff;"> 

                                    <rich:panelMenu style="width:198px" itemMode="ajax" groupMode="ajax" groupExpandedLeftIcon="triangleUp"
                                                    groupCollapsedLeftIcon="triangleDown" topGroupExpandedRightIcon="chevronUp"
                                                    topGroupCollapsedRightIcon="chevronDown" itemLeftIcon="disc" expandSingle="false"> 
                                        <rich:panelMenuGroup label="My Team Data" rendered="#{authByRoleCtl.RH}"> 
                                            <a href="myTeamData.xhtml"><rich:panelMenuItem label="HR Management" name="HR Management" leftIcon="images/group.png"/> </a>  
                                        </rich:panelMenuGroup>
                                        <rich:panelMenuGroup label="My Team" rendered="#{authByRoleCtl.PM}"> 
                                            <a href="myTeam.xhtml"><rich:panelMenuItem label="Leaves Summary" name="Leaves Summary" leftIcon="images/group_go.png"/> </a>  
                                            <a href="teamcalendar.xhtml"><rich:panelMenuItem label="Team Calendar" name="Team Calendar" leftIcon="images/calendar_view_day.png"/> </a>  
                                            <a href="teamcalendar.xhtml"><rich:panelMenuItem label="Team Data" name="Team Data" leftIcon="images/group_gear.png"/> </a>  
                                        </rich:panelMenuGroup>
                                        <rich:panelMenuGroup label="My Data" expanded="true"> 
                                            <a href="acceuil.xhtml"><rich:panelMenuItem label="Personal Data" name="Personal Data" leftIcon="images/user_gray.png"/> </a>
                                            <a href="OrganizationalData.xhtml"><rich:panelMenuItem label="Organizational Data" name="Organizational Data" leftIcon="images/chart_organisation.png" /> </a>
                                            <a href="familyData.xhtml"><rich:panelMenuItem label="Family Data" name="Family Data" leftIcon="images/house.png"  style="background: #fee6cd;" /> </a>
                                            <a href="contratData.xhtml"><rich:panelMenuItem label="Contract Data" name="Contract Data" leftIcon="images/page_white_text_width.png"/> </a>
                                            <a href="salary.xhtml"><rich:panelMenuItem label="Salary Data" name="Salary Data" leftIcon="images/cash-icon.png"/> </a>
                                             <a href="EducationData.xhtml"><rich:panelMenuItem label="My Education" name="My Education" leftIcon="images/medal_gold_1.png"/> </a>
                                        </rich:panelMenuGroup> 
                                        <rich:panelMenuGroup label="My Leaves" expanded="true" > 
                                            <a href="leaves.xhtml"><rich:panelMenuItem label="My Leaves" name="My Leaves" leftIcon="images/status_away.png"/> </a>
                                            <a href="absenceList.xhtml"><rich:panelMenuItem label="My Absences" name="My Absences" leftIcon="images/status_busy.png"/> </a> 
                                            <a href="teamcalendar.xhtml"><rich:panelMenuItem label="My Team Calendar" name="My Team Calendar" leftIcon="images/calendar.png"/> </a>

                                        </rich:panelMenuGroup> 
                                        <rich:panelMenuGroup label="Medical Inssurance" expanded="true"> 
                                            <a href="leaves.xhtml"><rich:panelMenuItem label="Inssurance Follow" name="Inssurance Follow" leftIcon="images/pill.png"/> </a> 
                                        </rich:panelMenuGroup>
                                        <rich:panelMenuGroup label="Self Service" expanded="true"> 
                                            <a href="selfService.xhtml"><rich:panelMenuItem label="Employment Certificate" name="Certificate of Employment" leftIcon="images/timeline_marker.png"/> </a>  
                                            <a href="#"><rich:panelMenuItem label="Salary Certificate" name="Salary Certificate" leftIcon="images/coins.png"/> </a> 
                                            <a href="#"><rich:panelMenuItem label="Payslip" name="Payslip" leftIcon="images/page_key.png"/> </a>  
                                        </rich:panelMenuGroup>
                                        <rich:panelMenuGroup label="Directory" expanded="true"> 
                                            <a href="directory.xhtml"><rich:panelMenuItem label="Employees data" name="Employees data" leftIcon="images/database_table.png"/> </a>
                                        </rich:panelMenuGroup>

                                    </rich:panelMenu> 
                                </h:panelGrid>

                            </div>

                        </td>




                        <td style="border : solid 1px #f1f1f1; width: 100%;">

                            <div id="middle" style="width: 100%; min-height: 932px; border: solid 1px #f1f1f1;">     

                                <div id="actions" style="width: 100%; height: 80px; margin-bottom: 2px;" title="Actions">
                                    <p style="color : #666666; font: bold 12px Helvetica, Arial, sans-serif; margin-left: 4px; margin-top: 4px; ">Actions : </p>
                                    <h:panelGrid columns="3" style="margin-top: 4px; margin-left: 4px;">

                                        <h:panelGrid columns="2" >
                                            <a4j:commandLink render="editZone" onclick="#{rich:component('add')}.show()"><img src="images/1336321846_user-group-new.png"/></a4j:commandLink>
                                            <h:outputText value="Add Spouse  "></h:outputText>
                                        </h:panelGrid>

                                        <h:panelGrid columns="2" style="margin-left: 20px;" >
                                            <a href="Child.xhtml" ><img src="images/1336326304_Add-Male-User.png"/></a>
                                            <h:outputText value="Add Child : "></h:outputText>
                                        </h:panelGrid>

                                        <h:panelGrid columns="2" style="margin-left: 20px;" >
                                            <a href="familyData.xhtml"><img src="images/1341096810_arrow_circle_left.png"/></a>
                                            <h:outputText value="Refresh data  "> 
                                            </h:outputText>
                                        </h:panelGrid>
                                    </h:panelGrid>
                                </div>


                                <rich:panel style="margin: auto; width: 100%; min-height: 150px; font: 11px Helvetica, Arial, sans-serif; border: solid 1px #ffffff; background: #ffffff;">            
                                    <f:facet name="header">                
                                        <h:outputText value="Summary Data"></h:outputText>            
                                    </f:facet>
                                    <table style="margin: auto; min-width: 800px; min-height:300px;" id="datatablesG">
                                        <tbody>
                                            <tr>
                                                <td style="width: 150px; height: 30px;"><h:outputText value="Firstname:"/></td>
                                                <td style="background: #fff; width: 225px;"><h:outputText value="#{EmployCtl.geteGeneralData().name}"/></td>
                                                <td style="width: 150px; height: 30px;"><h:outputText value="Lastname:"/></td>
                                                <td style="background: #fff;"><h:outputText value="#{EmployCtl.geteGeneralData().surname}"/></td>
                                            </tr>
                                            <tr>
                                                <td style="width: 150px; height: 30px;"><h:outputText value="Gender :"/></td>
                                                <td style="background: #fff; width: 225px;"><h:outputText value="#{EmployCtl.geteGeneralData().gender}"/></td>
                                                <td style="width: 150px; height: 30px;"><h:outputText value="Marital Status:"/></td>
                                                <td style="background: #fff;"><h:outputText value="#{EmployCtl.geteGeneralData().martialStatus}"/></td>
                                            </tr>

                                            <tr>
                                                <td style="width: 150px; height: 30px;"><h:outputText value="N° of spouse :"/></td>
                                                <td style="background: #fff;"><h:outputText value="#{ESpouseCtl.nbSpouse}"/></td>
                                                <td style="width: 150px; height: 30px;"><h:outputText value="N° of children :"/></td>
                                                <td style="background: #fff;"><h:outputText value="#{ESpouseCtl.nbChildren}"/></td>
                                            </tr>
                                        </tbody>
                                    </table>
                                </rich:panel>


                                <div style="height : 750px; background: #ffffff;">
                                    <a4j:repeat value="#{ESpouseCtl.geteSpouseList()}" var="spouse" rows="4" id="repeat">

                                        <div style="margin:auto; width:100%; min-height: 380px; margin-bottom: 10px;">

                                            <div id ="summ" style="height: 20px; width: 100%; background: #ccccff; height: 30px;">
                                                <h:panelGroup>
                                                    <h:outputText value="Your spouse ID : #{spouse.spouseId}" style="font-weight:bold; color : #ffffff; margin-left:8px; " />

                                                    <a4j:commandLink onclick="#{rich:component('delete')}.show()" style="float : right; margin-left: 10px;">
                                                        <f:setPropertyActionListener  value="#{spouse.spouseId}" target="#{ESpouseCtl.idSToEdit}"/>
                                                        <img src="images/delete-icon.gif"/>
                                                    </a4j:commandLink>
                                                    <h:outputText value="Delete : " style="color : #ffffff; float : right; font-weight:bold;" />
                                                   
                                                    <a4j:commandLink  action="edit" style="float : right;  margin-left: 10px; margin-right: 30px; ">
                                                        <f:setPropertyActionListener target="#{SpouseCtl.idSpouseToEdit}" value="#{spouse.spouseId}"/>
                                                        <img src="images/edit-icon.png"/>
                                                    </a4j:commandLink>
                                                    
                                                    <h:outputText value="Edit  : " style="color : #ffffff; float: right; font-weight:bold;" />
                                                    <h:outputText value="Status : " style="margin-left : 200px; font-weight:bold; color : #ffffff;"/>
                                                    <h:outputText value="#{spouse.approved}" rendered="#{spouse.approved=='Approved'}" style="color: blue; margin-left : 4px; font-weight:bold;"/>
                                                    <h:outputText value="#{spouse.approved}" rendered="#{spouse.approved=='Disapproved'}" style="color: red; margin-left : 4px; font-weight:bold;"/>
                                                    <h:outputText value="#{spouse.approved}" rendered="#{spouse.approved=='waiting'}" style="color: orange; margin-left : 4px; font-weight:bold;"/>
                                                </h:panelGroup>

                                            </div>
                                            <div id="summ2" style="border : solid 2px #c6c6c6; height: 350px;">
                                                <table style="margin: auto; min-width: 800px; min-height:300px;" id="datatablesC">
                                                    <tbody>
                                                        <tr>
                                                            <td style="width: 150px; height: 30px;"><h:outputText value="Name:"/></td>
                                                            <td style="background: #fff; width: 225px;"><h:outputText value="#{spouse.spouseName}"/></td>
                                                            <td style="width: 150px; height: 30px;"><h:outputText value="Birth day :"/></td>
                                                            <td style="background: #fff;"><h:outputText value="#{spouse.spouseBirthday}"/></td>
                                                        </tr>
                                                        <tr>
                                                            <td style="width: 150px; height: 30px;"><h:outputText value="Status :"/></td>
                                                            <td style="background: #fff; width: 225px;"><h:outputText value="#{spouse.spouseStatus}"/></td>

                                                        </tr>

                                                    </tbody>
                                                </table>


                                                <br/> <h:outputText value="Children List :" style="font-weight:bold" /><br/>
                                                <br/>
                                                <rich:dataTable  id="tab_users" value="#{ESpouseCtl.findChildBySpouseID(spouse.spouseId)}" var="children" styleClass="stable" style="width:100%" rows="15" rowClasses="odd-row, even-row">
                                                    <f:facet name="header">
                                                        <rich:columnGroup>
                                                            <rich:column rowspan="1"  >
                                                                <h:outputText value="ID"/>
                                                            </rich:column>
                                                            <rich:column  rowspan="1">
                                                                <h:outputText value="Name"/>
                                                            </rich:column>

                                                            <rich:column  rowspan="1">
                                                                <h:outputText value="BirthDay"/>
                                                            </rich:column>

                                                            <rich:column  rowspan="1">
                                                                <h:outputText value="Inssurance"/>
                                                            </rich:column>
                                                            <rich:column  rowspan="1">
                                                                <h:outputText value="Status"/>
                                                            </rich:column>
                                                            <rich:column  rowspan="1">
                                                                <h:outputText value="Actions"/>
                                                            </rich:column>
                                                        </rich:columnGroup>
                                                    </f:facet>

                                                    <rich:column  >
                                                        <h:outputText value="#{children.childId}"/>
                                                    </rich:column>

                                                    <rich:column style="width: 220px;">
                                                        <h:outputText value="#{children.childName}"/>
                                                    </rich:column>

                                                    <rich:column  >
                                                        <h:outputText value="#{children.childBirthday}"/>
                                                    </rich:column>

                                                    <rich:column  >
                                                        <h:outputText value="#{children.status}"/>
                                                    </rich:column>                                                  
                                                    <rich:column  >
                                                        <h:outputText value="#{children.approved}" rendered="#{children.approved=='Approved'}" style="color: blue;"/>
                                                        <h:outputText value="#{children.approved}" rendered="#{children.approved=='Disapproved'}" style="color: red;"/>
                                                        <h:outputText value="#{children.approved}" rendered="#{children.approved=='waiting'}" style="color: orange;"/>
                                                    </rich:column>
                                                    <rich:column style="width: 30px;" >
                                                        <h:panelGrid columns="2">
                                                            <a4j:commandLink id="update" onclick="#{rich:component('deleteChild')}.show()" style="margin:auto;">
                                                                <f:setPropertyActionListener target="#{ChildCtl.childToEdit}" value="#{children.childId}"/>
                                                                <img src="images/delete-icodf.png" style="margin : auto;" title="delete"/>
                                                            </a4j:commandLink>
                                                        </h:panelGrid>
                                                    </rich:column>
                                                </rich:dataTable>
                                            </div>    
                                        </div>
                                    </a4j:repeat> 

                                </div>
                            </div>
                        </td>

                    </tr>
                </tbody>
            </table>

            <rich:jQuery selector=".stable tr" event="mouseover"
                         query="jQuery(this).addClass('active-row')"/>
            <rich:jQuery selector=".stable tr" event="mouseout"
                         query="jQuery(this).removeClass('active-row')"/>

            <rich:popupPanel id="delete" autosized="true">
                <f:facet name="header">
                    Delete Spouse
                </f:facet>
                Are you sure you want to delete this spouse?
                <br/><br/>
                <h:panelGrid columns="2" >
                    <a4j:commandButton onclick="#{rich:component('delete')}.hide()" value="Cancel"/>
                    <a4j:commandButton action="#{ESpouseCtl.delete()}"  onclick="#{rich:component('delete')}.hide()" oncomplete="#{ESpouseCtl.update()}" value="Delete"/>
                </h:panelGrid>
            </rich:popupPanel>
            <rich:popupPanel id="deleteChild" autosized="true">
                <f:facet name="header">
                    Delete Child
                </f:facet>
                Are you sure you want to delete this Child?
                <br/><br/>
                <h:panelGrid columns="2" >
                    <a4j:commandButton onclick="#{rich:component('deleteChild')}.hide()" value="Cancel"/>
                    <a4j:commandButton render="core" action="#{ChildCtl.delete()}" onclick="#{rich:component('deleteChild')}.hide()" oncomplete="#{ESpouseCtl.update()}" value="Delete"/>
                </h:panelGrid>
            </rich:popupPanel>
        </h:form>

        <rich:popupPanel id="add" autosized="true" width="400">
            <f:facet name="header">
                Add Spouse
            </f:facet>
            <h:form>
                <h:panelGrid id="editZone" style="width:100%" columns="2">
                    <h:outputText value="first name"/>
                    <h:inputText value="#{ESpouseCtl.spouseName}"/>
                    <h:outputText value="last name"/>
                    <h:inputText value="#{ESpouseCtl.spouseSurname}" />
                    <h:outputText value="Birth Day"/>
                    <rich:calendar mode="ajax" boundaryDatesMode="scroll" value="#{ESpouseCtl.spouseBirthday}"/>
                    <h:outputText/><h:outputText/>
                    <h:outputText value="Status"/>
                    <rich:select value="#{ESpouseCtl.spouseStatus}" style="width: 100%">
                        <f:selectItem itemValue="yes" itemLabel="pris en charge"/>
                        <f:selectItem itemValue="no" itemLabel="non pris en charge"/>
                    </rich:select>


                </h:panelGrid>
                <br/><br/>
                <h:panelGrid columns="2" >
                    <h:commandButton onclick="#{rich:component('add')}.hide()" value="Cancel"/>
                    <h:commandButton render="core" action="#{ESpouseCtl.save()}" oncomplete="#{rich:component('add')}.hide()" value="Save" />
                </h:panelGrid>
            </h:form>
        </rich:popupPanel>

    </h:body>
</html>
