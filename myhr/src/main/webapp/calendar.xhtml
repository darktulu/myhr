<?xml version="1.0" encoding="UTF-8"?>
<!--
To change this template, choose Tools | Templates
and open the template in the editor.
-->
<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml"
	xmlns:h="http://java.sun.com/jsf/html"
	xmlns:a4j="http://richfaces.org/a4j"
	xmlns:rich="http://richfaces.org/rich"
	xmlns:p="http://primefaces.org/ui"
	xmlns:fn="http://java.sun.com/jsp/jstl/functions"
	xmlns:ui="http://java.sun.com/jsf/facelets"
	xmlns:f="http://java.sun.com/jsf/core"
	xmlns:c="http://java.sun.com/jsp/jstl/core">
<h:head>
	<title>MyHR</title>
	<link rel='stylesheet' id='layout-css' href='./css/layout.css'
		type='text/css' media='all' />
	<link rel='stylesheet' id='layout-csss' href='../css/layout.css'
		type='text/css' media='all' />
	<link rel="Stylesheet" href="./css/only.css" type="text/css" />
	<link rel="Stylesheet" href="../css/only.css" type="text/css" />
	<link rel="Stylesheet" href="./css/toolbar-ui.css" type="text/css" />
	<f:loadBundle basename="com.wadia.properties.labels" var="lbl" />
	<f:loadBundle basename="com.wadia.properties.messages" var="msg" />


<script type="text/javascript">
function nodes(){$(".taken").parent().parent().css("background-color","green");
$(".absenceJ").parent().parent().css("background-color","yellow");
$(".absenceNJ").parent().parent().css("background-color","red");
$(".planned").parent().parent().css("background-color","purple");}
</script>

</h:head>
<h:body style="background: #f1f1f1; ">
	<div id="container">
		<ui:include src="header.xhtml" />
	</div>
	<h:form id="forms">
		<table style="max-width: 1700px; margin: auto;">
			<tbody>
				<tr>
					<td>
						<div id="left"
							style="width: 200px; min-height: 690px; background: #f1f1f1; font: 14px Helvetfontica, Arial, sans-serif;">
							<h:panelGrid columns="2" columnClasses="cols,cols" width="190"
								style="background: #ffffff;">
								<rich:panelMenu style="width:198px" itemMode="ajax"
									groupMode="ajax" groupExpandedLeftIcon="triangleUp"
									groupCollapsedLeftIcon="triangleDown"
									topGroupExpandedRightIcon="chevronUp"
									topGroupCollapsedRightIcon="chevronDown" itemLeftIcon="disc"
									expandSingle="false">
									<rich:panelMenuGroup label="My Team Data"
										rendered="#{authByRoleCtl.RH}">
										<a href="myTeamData.xhtml"><rich:panelMenuItem
												label="HR Management" name="HR Management"
												leftIcon="images/group.png" /> </a>
									</rich:panelMenuGroup>
									<rich:panelMenuGroup label="My Team"
										rendered="#{authByRoleCtl.PM}" expanded="true">
										<a href="myTeam.xhtml"><rich:panelMenuItem
												label="Leaves Summary" name="Leaves Summary"
												leftIcon="images/group_go.png" /> </a>
										<a href="temData.xhtml"><rich:panelMenuItem
												label="Team Data" name="Team Data"
												leftIcon="images/group_gear.png" /> </a>
										<a href="calendar.xhtml"><rich:panelMenuItem
												label="My Reports" name="My Reports"
												leftIcon="images/calendar_view_day.png"
												style="background: #fee6cd;" /> </a>
									</rich:panelMenuGroup>
									<rich:panelMenuGroup label="My Data" expanded="fasel">
										<a href="acceuil.xhtml"><rich:panelMenuItem
												label="Personal Data" name="Personal Data"
												leftIcon="images/user_gray.png" /> </a>
										<a href="OrganizationalData.xhtml"><rich:panelMenuItem
												label="Organizational Data" name="Organizational Data"
												leftIcon="images/chart_organisation.png" /> </a>
										<a href="familyData.xhtml"><rich:panelMenuItem
												label="Family Data" name="Family Data"
												leftIcon="images/house.png" /> </a>
										<a href="contratData.xhtml"><rich:panelMenuItem
												label="Contract Data" name="Contract Data"
												leftIcon="images/page_white_text_width.png" /> </a>
										<a href="salary.xhtml"><rich:panelMenuItem
												label="Salary Data" name="Salary Data"
												leftIcon="images/cash-icon.png" /> </a>
										<a href="EducationData.xhtml"><rich:panelMenuItem
												label="My Education" name="My Education"
												leftIcon="images/medal_gold_1.png" /> </a>
									</rich:panelMenuGroup>
									<rich:panelMenuGroup label="My Leaves" expanded="false">
										<a href="leaves.xhtml"><rich:panelMenuItem
												label="My Leaves" name="My Leaves"
												leftIcon="images/status_away.png" /> </a>
										<a href="absenceList.xhtml"><rich:panelMenuItem
												label="My Absences" name="My Absences"
												leftIcon="images/status_busy.png" /> </a>
										<a href="teamcalendar.xhtml"><rich:panelMenuItem
												label="My Team Calendar" name="My Team Calendar"
												leftIcon="images/calendar.png" /> </a>

									</rich:panelMenuGroup>
									<rich:panelMenuGroup label="Medical Inssurance"
										expanded="false">
										<a href="inssurance.xhtml"><rich:panelMenuItem
												label="Inssurance Follow" name="Inssurance Follow"
												leftIcon="images/pill.png" /> </a>
									</rich:panelMenuGroup>
									<rich:panelMenuGroup label="Self Service" expanded="false">
										<a href="selfService.xhtml"><rich:panelMenuItem
												label="Employment Certificate"
												name="Certificate of Employment"
												leftIcon="images/timeline_marker.png" /> </a>
										<a href="SalaryCertificate.xhtml"><rich:panelMenuItem
												label="Salary Certificate" name="Salary Certificate"
												leftIcon="images/coins.png" /> </a>
										<a href="#"><rich:panelMenuItem label="Payslip"
												name="Payslip" leftIcon="images/page_key.png" /> </a>
									</rich:panelMenuGroup>
									<rich:panelMenuGroup label="Directory" expanded="false">
										<a href="directory.xhtml"><rich:panelMenuItem
												label="Employees data" name="Employees data"
												leftIcon="images/database_table.png" /> </a>
									</rich:panelMenuGroup>

								</rich:panelMenu>
							</h:panelGrid>

						</div>

					</td>

					<td style="border: solid 1px #f1f1f1; width: 100%;">
						<div id="middle"
							style="width: 100%; min-height: 300px; border: solid 1px #f1f1f1;">
							<div id="actions"
								style="width: 100%; height: 80px; margin-bottom: 2px;"
								title="Actions">
								<p
									style="color: #666666; font: bold 12px Helvetica, Arial, sans-serif; margin-left: 4px; margin-top: 4px;">Actions
									:</p>
								<h:panelGrid columns="2"
									style="margin-top: 4px; margin-left: 4px;">
									<h:panelGrid columns="2" style="margin-left: 20px;">
										<a href="calendar.xhtml"><img
											src="images/1341096810_arrow_circle_left.png" /></a>
										<h:outputText value="Refresh data  ">
										</h:outputText>
									</h:panelGrid>
								</h:panelGrid>
							</div>

							<p:panel header="My Team Calendar"
								style="margin-top:2px; min-height: 600px; width : 100%;">

								<table style="width: 500px; float: left; margin-bottom: 10px;">
									<tbody>
										<tr>
											<td><h:outputText value="Month" /></td>
											<td><p:selectOneMenu value="#{MyReportsCalendar.month}"
													required="true" requiredMessage="not null value for Month">
													<f:selectItem itemValue="0" itemLabel="Janvier" />
													<f:selectItem itemValue="1" itemLabel="FÃ©vrier" />
													<f:selectItem itemValue="2" itemLabel="Mars" />
													<f:selectItem itemValue="3" itemLabel="Avril" />
													<f:selectItem itemValue="4" itemLabel="Mai" />
													<f:selectItem itemValue="5" itemLabel="Juin" />
													<f:selectItem itemValue="6" itemLabel="Juillet" />
													<f:selectItem itemValue="7" itemLabel="Aout" />
													<f:selectItem itemValue="8" itemLabel="Septembre" />
													<f:selectItem itemValue="9" itemLabel="Octobre" />
													<f:selectItem itemValue="10" itemLabel="Novembre" />
													<f:selectItem itemValue="11" itemLabel="Decembre" />

													<p:ajax event="change" onstart="confirmation.show()"
														onsuccess="confirmation.hide()" update="tab"
														listener="#{MyReportsCalendar.generatedays()}" oncomplete="nodes();"/>

												</p:selectOneMenu></td>
											<td></td>
										</tr>
										<tr>
											<td><h:outputText value="Year" /></td>
											<td><p:inputText value="#{MyReportsCalendar.year}"
													required="true" requiredMessage="Not null year" /></td>
											<td>
												<!--  p:commandButton value="check" actionListener="#{MyReportsCalendar.generatedays()}"
                                       		  update="tab" onclick="confirmation.show()" oncomplete="confirmation.hide()"/-->
											</td>
										</tr>
									</tbody>
								</table>



								<p:dataTable value="#{MyReportsCalendar.myReportsUsernames}"
									var="team" id="tab" widgetVar="tab" rows="20"
									style=" width: 100%; margin : auto; margin-top : 15px; text-align: center;"
									paginator="true" paginatorPosition="bottom">

									<p:column>
										<f:facet name="header">
											<h:outputText value="MyTeam" />
										</f:facet>
										<h:outputText
											value="#{MyReportsCalendar.fullNameProvider(team)}" />
									</p:column>

									<p:columns value="#{MyReportsCalendar.listDays}" var="col"
										styleClass="table-ligne1-centre" width="3">
										<f:facet name="header">
											<h:outputText value="#{col}" />
										</f:facet>
										<f:subview rendered="#{MyReportsCalendar.ColorProvider(team,col)=='T'}">
											<div class="taken"/>
													
										</f:subview>
										
										<f:subview rendered="#{MyReportsCalendar.ColorProvider(team,col)=='AJ'}">
											<div class="absenceJ"/>	    	
										</f:subview>
										
										<f:subview rendered="#{MyReportsCalendar.ColorProvider(team,col)=='ANJ'}">
											<div class="absenceNJ"/>	    	
										</f:subview>
										
										<f:subview rendered="#{MyReportsCalendar.ColorProvider(team,col)=='P'}">
											<div class="planned"/>	    	
										</f:subview>
																														
																			
									</p:columns>

								</p:dataTable>
								
								<p:panelGrid columns="8">
								
								<div style="width : 25px; height : 25px; background-color: green;"/>
								<h:outputText value="Vacation Days Taken"/>
								
								<div style="width : 25px; height : 25px; background-color: purple;"/>
								<h:outputText value="Planned vacation"/>
								
								<div style="width : 25px; height : 25px; background-color: yellow;"/>
								<h:outputText value="Justified Abscence"/>
								
								<div style="width : 25px; height : 25px; background-color: red;"/>
								<h:outputText value="Non Justified Abscence"/>
								
								
								</p:panelGrid>
								
							</p:panel>
						</div>
					</td>
				</tr>
			</tbody>
		</table>

		<p:confirmDialog id="confirmDialog"
			message="Please wait while generating your calendar"
			header="Generating in process" severity="info"
			widgetVar="confirmation">


		</p:confirmDialog>

	</h:form>

</h:body>
</html>
